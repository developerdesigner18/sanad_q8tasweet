"use strict";(self.webpackChunkelection=self.webpackChunkelection||[]).push([[791],{1238:function(e,n,t){t.d(n,{HS:function(){return a},LL:function(){return o}});var o="http://3.233.196.8:8000/",a=("".concat("http://3.233.196.8:8000/","Backend/images/"),[{key:0,value:"created",color:"cyan"},{key:1,value:"broken",color:"red"},{key:2,value:"approved",color:"orange"},{key:3,value:"waiting...",color:"purple"},{key:4,value:"processing...",color:"blue"},{key:5,value:"done",color:"green"}])},7815:function(e,n,t){t.r(n);var o=t(4942),a=t(1413),i=t(4165),r=t(5861),l=t(9439),s=t(2791),c=t(5316),u=t(3360),d=t(160),m=t(323),p=t(9743),h=t(2677),f=t(9140),g=t(1087),v=t(3513),x=t(7037),j=t(7798),b=t(2576),Z=t(6616),N=t(1830),w=t.n(N),y=t(1238),C=t(184);n.default=function(){var e=[{name:"No",width:"60px",selector:function(e){return[e.no]},className:"table-column-center"},{name:"Name",title:"name",selector:function(e){return[e.name]},sortable:!0},{name:"Menus",title:"menu",selector:function(e){return[e.menu]},cell:function(e){return(0,C.jsx)("span",{className:"",style:{width:"100%",textAlign:"end"},children:(0,C.jsx)(Z.Z,{classNamePrefix:"background",display:"value",value:e.menu,labelledBy:"Select",isMulti:!0,isDisabled:!0})})}},{name:"Description",title:"description",selector:function(e){return[e.description]}},{name:"Action",width:"100px",cell:function(e){return(0,C.jsxs)("span",{className:"",style:{width:"100%",textAlign:"end"},children:[(0,C.jsx)(j.Z,{placement:"top",overlay:(0,C.jsx)(b.Z,{children:"Edit"}),children:(0,C.jsx)(g.rU,{to:"#",className:"btn btn-primary btn-sm rounded-11 me-2",onClick:function(){return G(e)},children:(0,C.jsx)("i",{children:(0,C.jsxs)("svg",{className:"table-edit",xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 24 24",width:"16",children:[(0,C.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,C.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM5.92 19H5v-.92l9.06-9.06.92.92L5.92 19zM20.71 5.63l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41z"})]})})})}),(0,C.jsx)(j.Z,{placement:"top",overlay:(0,C.jsx)(b.Z,{children:"Delete"}),children:(0,C.jsx)(g.rU,{to:"#",className:"btn btn-danger btn-sm rounded-11",onClick:function(){return J(e.id)},children:(0,C.jsx)("i",{children:(0,C.jsxs)("svg",{className:"table-delete",xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 24 24",width:"16",children:[(0,C.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,C.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4h-3.5z"})]})})})})]})}}],n=s.useState({flag:!1,mode:0}),t=(0,l.Z)(n,2),N=t[0],_=t[1],k=s.useState({limit:5,keyword:"",filter:"name",sorter:"desc",pagenum:1}),L=(0,l.Z)(k,2),O=L[0],S=L[1];s.useEffect((function(){fetch(y.LL+"getMenu").then((function(e){return e.json()})).then((function(e){console.log("menu",e);var n=[];e.data.map((function(t){if(!t.parentid){var o={label:t.name,options:[]};e.data.map((function(e){e.parentid-t.id===0&&o.options.push({menuId:e.id,value:e.name,label:e.name})})),n.push(o)}})),I({data:n})})),F(O)}),[]);var B=function(){return _({flag:!1,mode:0})},M=s.useState({data:[],count:0}),P=(0,l.Z)(M,2),V=P[0],A=P[1],D=s.useState({id:0,name:"",menu:"",description:""}),H=(0,l.Z)(D,2),z=H[0],T=H[1],U=s.useState({data:[]}),Y=(0,l.Z)(U,2),E=Y[0],I=Y[1],F=function(e){console.log("ijik"),console.log("data",e),fetch(y.LL+"getAllPermission/?limit="+e.limit+"&keyword="+e.keyword+"&filter="+e.filter+"&sorter="+e.sorter+"&pagenum="+e.pagenum,{method:"GET"}).then((function(e){return e.json()})).then(function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getpermissiondata",n),t=[],e.next=4,n.data.map(function(){var e=(0,r.Z)((0,i.Z)().mark((function e(o){var a,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("e",o),r=o,console.log("______1",r),r.menu=[],console.log("______2",r),e.next=7,null===n||void 0===n||null===(a=n.menu)||void 0===a?void 0:a.map((function(e){console.log("ele",e),e.permissionid-o.id===0&&r.menu.push({menuId:e.menuid,value:e.value,label:e.label})}));case 7:console.log("______",r),console.log("YHUJN"),t.push(r);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 4:console.log("set_data",t),A({data:t,count:n.count}),console.log("alldata",V);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},J=function(e){w().fire({title:"Are you sure?",text:"You delete this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(n){if(n.isConfirmed){var t=O;fetch(y.LL+"delPermission/?id="+e+"&limit="+t.limit+"&keyword="+t.keyword+"&filter="+t.filter+"&sorter="+t.sorter+"&pagenum="+t.pagenum,{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log("__________"),w().fire("Deleted!","Your data has been deleted.","success"),F(O)}))}}))},G=function(e){_({flag:!0,mode:2}),T({id:e.id,name:e.name,description:e.description,menu:e.menu})},W=function(e){T((0,a.Z)((0,a.Z)({},z),{},(0,o.Z)({},e.target.name,e.target.value)))};return(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"breadcrumb-header justify-content-between",children:[(0,C.jsx)("div",{className:"left-content",children:(0,C.jsx)("span",{className:"main-content-title mg-b-0 mg-b-lg-1",children:"Permission List"})}),(0,C.jsxs)("div",{className:"justify-content-center mt-2",children:[(0,C.jsxs)(g.rU,{className:"btn me-2 btn-rounded btn-outline-primary",to:"#",onClick:function(){_({flag:!0,mode:1}),T({id:0,name:"",menu:"",description:""})},children:[(0,C.jsx)("i",{className:"fe fe-plus me-2"}),"Add New Permission"]}),(0,C.jsxs)(c.Z,{show:N.flag,onHide:B,children:[(0,C.jsxs)(c.Z.Header,{className:"modal-header",children:[N.mode-1===0?(0,C.jsx)("h6",{className:"modal-title",children:"Add New Permission"}):(0,C.jsx)("h6",{className:"modal-title",children:"Update Permission"}),(0,C.jsx)(u.Z,{variant:"",className:"btn-close",type:"button",onClick:B,children:(0,C.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,C.jsxs)(c.Z.Body,{className:"modal-body",children:[" ",(0,C.jsx)("div",{className:"p-4",children:(0,C.jsxs)(d.Z,{className:"form-horizontal",children:[(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsx)(d.Z.Control,{type:"text",className:"form-control",id:"name",placeholder:"name",name:"name",value:z.name,onChange:function(e){return W(e)}})}),(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsx)(d.Z.Control,{type:"text",className:"form-control",id:"description",placeholder:"description",name:"description",value:z.description,onChange:function(e){return W(e)}})}),(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsx)(Z.Z,{classNamePrefix:"background",display:"value",options:E.data,value:z.menu,onChange:function(e){T((0,a.Z)((0,a.Z)({},z),{},{menu:e}))},labelledBy:"Select",isMulti:!0})})]})})]}),(0,C.jsxs)(c.Z.Footer,{children:[N.mode-1===0?(0,C.jsx)(u.Z,{variant:"",className:"btn ripple btn-primary",type:"button",onClick:function(){console.log("perdata",z);var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)};fetch(y.LL+"addPermission",e).then((function(e){return e.json()})).then((function(e){e.code-200===0&&(F(O),B())}))},children:"Add"}):(0,C.jsx)(u.Z,{variant:"",className:"btn ripple btn-primary",type:"button",onClick:function(){B(),w().fire({title:"Are you sure?",text:"You update this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update it!"}).then((function(e){if(e.isConfirmed){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)};fetch(y.LL+"updatePermission",n).then((function(e){return e.json()})).then((function(e){e.code-200===0&&(F(O),w().fire("Update!","Your data has been updated.","success"))}))}}))},children:"Update"}),(0,C.jsx)(u.Z,{variant:"",className:"btn ripple btn-secondary",onClick:B,children:"Close"})]})]})]})]}),(0,C.jsx)(p.Z,{className:"row-sm",children:(0,C.jsx)(h.Z,{lg:12,children:(0,C.jsx)(f.Z,{className:"custom-card",children:(0,C.jsx)(f.Z.Body,{children:(0,C.jsx)("div",{className:"table-responsive ",children:(0,C.jsx)("span",{className:"datatable",children:(0,C.jsxs)("span",{className:"uselistdata",children:[(0,C.jsx)("label",{className:"float-first",children:(0,C.jsxs)("select",{className:"form-control select form-select",defaultValue:"5",onChange:function(e){S((0,a.Z)((0,a.Z)({},O),{},{limit:e.target.value,pagenum:1}));var n=O;n.limit=e.target.value,n.pagenum=1,F(n)},children:[(0,C.jsx)("option",{value:"5",children:"5\xa0\xa0\xa0\xa0"}),(0,C.jsx)("option",{value:"10",children:"10\xa0\xa0\xa0\xa0"}),(0,C.jsx)("option",{value:"20",children:"20\xa0\xa0\xa0\xa0"}),(0,C.jsx)("option",{value:"50",children:"50\xa0\xa0\xa0\xa0"})]})}),(0,C.jsx)("label",{className:"float-end",children:(0,C.jsx)("input",{type:"text",placeholder:"Name Search...",className:"mb-4 form-control-sm form-control",onChange:function(e){S((0,a.Z)((0,a.Z)({},O),{},{keyeword:e.target.value,pagenum:1}));var n=O;n.keyword=e.target.value,n.pagenum=1,F(n)}})}),(0,C.jsx)(v.ZP,{columns:e,data:function(e){var n=[];return e&&e.map((function(e,t){var o=e;o.no=t+O.limit*(O.pagenum-1)+1,n.push(o)})),n}(V.data),defaultSortField:"ID",striped:!0,defaultSortAsc:!1,pagination:!1,onSort:function(n,t){S((0,a.Z)((0,a.Z)({},O),{},{filter:e[n.id-1].title,sorter:t,pagenum:1}));var o=O;o.filter=e[n.id-1].title,o.sorter=t,o.pagenum=1,F(o)}}),(0,C.jsx)("label",{className:"float-end",style:{marginTop:"5px"},children:(0,C.jsx)(x.Z,{page:O.pagenum,count:Math.ceil(V.count/O.limit),showFirstButton:!0,showLastButton:!0,onChange:function(e,n){S((0,a.Z)((0,a.Z)({},O),{},{pagenum:n}));var t=O;t.pagenum=n,F(t)}})})]})})})})})})})]})}},6616:function(e,n,t){t.d(n,{Z:function(){return h}});var o=t(7462),a=t(2791),i=t(8308),r=t(8003),l=t(1413),s=t(3433),c=t(5987),u=t(3646),d=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],m=function(){var e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,t=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),o=String(n.getOptionValue(e)).toLowerCase(),a=String(n.getOptionLabel(e)).toLowerCase();return o===t||a===t},p={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,n,t,o){return!(!e||n.some((function(n){return m(e,n,o)}))||t.some((function(n){return m(e,n,o)})))},getNewOptionData:function(e,n){return{label:n,value:e,__isNew__:!0}}};t(4164),t(1672);var h=(0,a.forwardRef)((function(e,n){var t=function(e){var n=e.allowCreateWhileLoading,t=void 0!==n&&n,o=e.createOptionPosition,r=void 0===o?"last":o,m=e.formatCreateLabel,h=void 0===m?p.formatCreateLabel:m,f=e.isValidNewOption,g=void 0===f?p.isValidNewOption:f,v=e.getNewOptionData,x=void 0===v?p.getNewOptionData:v,j=e.onCreateOption,b=e.options,Z=void 0===b?[]:b,N=e.onChange,w=(0,c.Z)(e,d),y=w.getOptionValue,C=void 0===y?i.g:y,_=w.getOptionLabel,k=void 0===_?i.b:_,L=w.inputValue,O=w.isLoading,S=w.isMulti,B=w.value,M=w.name,P=(0,a.useMemo)((function(){return g(L,(0,u.I)(B),Z,{getOptionValue:C,getOptionLabel:k})?x(L,h(L)):void 0}),[h,x,k,C,L,g,Z,B]),V=(0,a.useMemo)((function(){return!t&&O||!P?Z:"first"===r?[P].concat((0,s.Z)(Z)):[].concat((0,s.Z)(Z),[P])}),[t,r,O,P,Z]),A=(0,a.useCallback)((function(e,n){if("select-option"!==n.action)return N(e,n);var t=Array.isArray(e)?e:[e];if(t[t.length-1]!==P)N(e,n);else if(j)j(L);else{var o=x(L,L),a={action:"create-option",name:M,option:o};N((0,u.D)(S,[].concat((0,s.Z)((0,u.I)(B)),[o]),o),a)}}),[x,L,S,M,P,j,N,B]);return(0,l.Z)((0,l.Z)({},w),{},{options:V,onChange:A})}((0,r.u)(e));return a.createElement(i.S,(0,o.Z)({ref:n},t))}))}}]);
//# sourceMappingURL=791.70096d05.chunk.js.map