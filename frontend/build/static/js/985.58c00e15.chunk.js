"use strict";(self.webpackChunkelection=self.webpackChunkelection||[]).push([[985],{1238:function(e,n,t){t.d(n,{HS:function(){return o},LL:function(){return a}});var a="http://3.233.196.8:8000/",o=("".concat("http://3.233.196.8:8000/","Backend/images/"),[{key:0,value:"created",color:"cyan"},{key:1,value:"broken",color:"red"},{key:2,value:"approved",color:"orange"},{key:3,value:"waiting...",color:"purple"},{key:4,value:"processing...",color:"blue"},{key:5,value:"done",color:"green"}])},985:function(e,n,t){t.r(n);var a=t(4942),o=t(1413),l=t(4165),r=t(5861),i=t(9439),s=t(2791),c=t(5316),u=t(3360),d=t(160),m=t(323),h=t(9743),f=t(2677),p=t(9140),x=t(1087),j=t(3513),g=t(7037),v=t(7798),b=t(2576),N=t(9434),Z=t(1238),y=t(1830),w=t.n(y),C=t(184);n.default=function(){var e=(0,N.v9)((function(e){return e.rank})),n=(0,N.v9)((function(e){return e.role})),t=[{name:"No",width:"60px",selector:function(e){return[e.no]},className:"table-column-center"},{name:"First Name",title:"fname",selector:function(e){return[e.fname]},sortable:!0},{name:"Last Name",title:"lname",selector:function(e){return[e.lname]},sortable:!0},{name:"Email",title:"email",selector:function(e){return[e.email]}},{name:"Username",title:"username",selector:function(e){return[e.username]}},{name:"Civil Id Number",title:"cid",selector:function(e){return[e.cid]}},{name:"Mobile Number",title:"mobile",selector:function(e){return[e.mobile]}},{name:"Role",title:"role",cell:function(e){return n.data.map((function(n){if(n.id-e.role===0)return n.name}))},sortable:!0},{name:"Rank",title:"rank",cell:function(n){return e.data.map((function(e){if(e.id-n.rank===0)return e.name}))},sortable:!0},{name:"Election",title:"election_option",cell:function(e){return G.data.map((function(n){if(n.id-e.election_option===0)return n.title}))},sortable:!0},{name:"Action",width:"100px",cell:function(e){return(0,C.jsxs)("span",{className:"",style:{width:"100%",textAlign:"end"},children:[(0,C.jsx)(v.Z,{placement:"top",overlay:(0,C.jsx)(b.Z,{children:"Edit"}),children:(0,C.jsx)(x.rU,{to:"#",className:"btn btn-primary btn-sm rounded-11 me-2",onClick:function(){return q(e)},children:(0,C.jsx)("i",{children:(0,C.jsxs)("svg",{className:"table-edit",xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 24 24",width:"16",children:[(0,C.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,C.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM5.92 19H5v-.92l9.06-9.06.92.92L5.92 19zM20.71 5.63l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41z"})]})})})}),(0,C.jsx)(v.Z,{placement:"top",overlay:(0,C.jsx)(b.Z,{children:"Delete"}),children:(0,C.jsx)(x.rU,{to:"#",className:"btn btn-danger btn-sm rounded-11",onClick:function(){return R(e.id)},children:(0,C.jsx)("i",{children:(0,C.jsxs)("svg",{className:"table-delete",xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 24 24",width:"16",children:[(0,C.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,C.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4h-3.5z"})]})})})})]})}}],y=s.useState({flag:!1,mode:0}),k=(0,i.Z)(y,2),L=k[0],B=k[1],U=s.useState({limit:5,keyword:"",filter:"id",sorter:"desc",pagenum:1}),S=(0,i.Z)(U,2),M=S[0],_=S[1];s.useEffect((function(){fetch(Z.LL+"getAllElection",{method:"GET"}).then((function(e){return e.json()})).then(function(){var e=(0,r.Z)((0,l.Z)().mark((function e(n){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I({data:n.data});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),J(M)}),[]);var E=function(){return B({flag:!1,mode:0})},T=s.useState({data:[],count:0}),z=(0,i.Z)(T,2),A=z[0],H=z[1],V=s.useState({id:0,avatar:"",fname:"",lname:"",role:0,cid:null,mobile:null,email:"",username:"",password:"",election_option:"",rank:""}),Y=(0,i.Z)(V,2),D=Y[0],F=Y[1],O=s.useState({data:[]}),P=(0,i.Z)(O,2),G=P[0],I=P[1],J=function(e){console.log("get"),fetch(Z.LL+"getallUser",{method:"GET"}).then((function(e){return e.json()})).then(function(){var e=(0,r.Z)((0,l.Z)().mark((function e(n){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("getdata",n),H({data:n.data,count:n.count});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},R=function(e){w().fire({title:"Are you sure?",text:"You delete this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(n){if(n.isConfirmed){fetch(Z.LL+"delUser/".concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){console.log("yuhu"),w().fire("Deleted!","Your data has been deleted.","success"),J()}))}})),J()},q=function(e){B({flag:!0,mode:2}),F({id:e.id,avatar:e.avatar,fname:e.fname,lname:e.lname,role:e.role,cid:e.cid,mobile:e.mobile,email:e.email,username:e.username,password:e.password,election_option:e.election_option,rank:e.rank})},K=function(e){F((0,o.Z)((0,o.Z)({},D),{},(0,a.Z)({},e.target.name,e.target.value)))};return(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"breadcrumb-header justify-content-between",children:[(0,C.jsx)("div",{className:"left-content",children:(0,C.jsx)("span",{className:"main-content-title mg-b-0 mg-b-lg-1",children:"User List"})}),(0,C.jsxs)("div",{className:"justify-content-center mt-2",children:[(0,C.jsxs)(x.rU,{className:"btn me-2 btn-rounded btn-outline-primary",to:"#",onClick:function(){B({flag:!0,mode:1}),F({id:0,fname:"",lname:"",role:0,cid:null,mobile:null,email:"",username:"",password:"",election_option:""})},children:[(0,C.jsx)("i",{className:"fe fe-plus me-2"}),"Add New User"]}),(0,C.jsxs)(c.Z,{show:L.flag,onHide:E,children:[(0,C.jsxs)(c.Z.Header,{className:"modal-header",children:[L.mode-1===0?(0,C.jsx)("h6",{className:"modal-title",children:"Add New User"}):(0,C.jsx)("h6",{className:"modal-title",children:"Update User"}),(0,C.jsx)(u.Z,{variant:"",className:"btn-close",type:"button",onClick:E,children:(0,C.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,C.jsxs)(c.Z.Body,{className:"modal-body",children:[" ",(0,C.jsx)("div",{className:"p-4",children:(0,C.jsxs)(d.Z,{className:"form-horizontal",children:[(0,C.jsxs)(m.Z,{className:"form-group",children:[(0,C.jsx)("label",{className:"float-end",children:(0,C.jsx)(d.Z.Control,{type:"text",className:"form-control",id:"lname",placeholder:"lname",name:"lname",value:D.lname,onChange:function(e){return K(e)}})}),(0,C.jsx)("label",{className:"",children:(0,C.jsx)(d.Z.Control,{type:"text",className:"form-control",id:"fname",placeholder:"fname",name:"fname",value:D.fname,onChange:function(e){return K(e)}})})]}),(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsx)(d.Z.Control,{type:"email",className:"form-control",id:"email",placeholder:"email",name:"email",value:D.email,onChange:function(e){return K(e)}})}),(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsx)(d.Z.Control,{type:"text",className:"form-control",id:"username",placeholder:"username",name:"username",value:D.username,onChange:function(e){return K(e)}})}),L.mode-1===0?(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsx)(d.Z.Control,{type:"password",className:"form-control",id:"password",placeholder:"password",name:"password",value:D.password,onChange:function(e){return K(e)}})}):(0,C.jsx)(C.Fragment,{}),(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsx)(d.Z.Control,{type:"number",className:"form-control",id:"cid",placeholder:"Civil id number",name:"cid",value:D.cid,onChange:function(e){return K(e)}})}),(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsx)(d.Z.Control,{type:"number",className:"form-control",id:"mobile",placeholder:"Mobile Number",name:"mobile",value:D.mobile,onChange:function(e){return K(e)}})}),(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsxs)("select",{id:"role",placeholder:"role",name:"role",className:"form-control select2 form-select",value:D.role?D.role:0,onChange:function(e){return K(e)},children:[(0,C.jsx)("option",{value:0,children:"No role"},""),n.data.map((function(e){return(0,C.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsxs)("select",{id:"rank",placeholder:"rank",name:"rank",className:"form-control select2 form-select",value:D.rank?D.rank:0,onChange:function(e){return K(e)},children:[(0,C.jsx)("option",{value:0,children:"No rank"},""),e.data.map((function(e){return(0,C.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),(0,C.jsx)(m.Z,{className:"form-group",children:(0,C.jsxs)("select",{id:"election_option",placeholder:"election_option",name:"election_option",className:"form-control select2 form-select",value:D.election_option?D.election_option:0,onChange:function(e){return K(e)},children:[(0,C.jsx)("option",{value:0,children:"No election option"},""),G.data.map((function(e){return(0,C.jsx)("option",{value:e.id,children:e.title},e.id)}))]})})]})})]}),(0,C.jsxs)(c.Z.Footer,{children:[L.mode-1===0?(0,C.jsx)(u.Z,{variant:"",className:"btn ripple btn-primary",type:"button",onClick:function(){console.log("dataValue",D);var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)};fetch(Z.LL+"addUser",e).then((function(e){return e.json()})).then((function(e){console.log("userdata",e),console.log("postData",M),e.code-200===0&&(J(M),E())})).catch((function(e){console.log("error",e)}))},children:"Add"}):(0,C.jsx)(u.Z,{variant:"",className:"btn ripple btn-primary",type:"button",onClick:function(){E(),w().fire({title:"Are you sure?",text:"You update this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update it!"}).then((function(e){if(e.isConfirmed){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)};fetch(Z.LL+"updateUser",n).then((function(e){return e.json()})).then((function(e){e.code-200===0&&(J(M),w().fire("Update!","Your data has been updated.","success"))}))}}))},children:"Update"}),(0,C.jsx)(u.Z,{variant:"",className:"btn ripple btn-secondary",onClick:E,children:"Close"})]})]})]})]}),(0,C.jsx)(h.Z,{className:"row-sm",children:(0,C.jsx)(f.Z,{lg:12,children:(0,C.jsx)(p.Z,{className:"custom-card",children:(0,C.jsx)(p.Z.Body,{children:(0,C.jsx)("div",{className:"table-responsive ",children:(0,C.jsx)("span",{className:"datatable",children:(0,C.jsxs)("span",{className:"uselistdata",children:[(0,C.jsx)("label",{className:"float-first",children:(0,C.jsxs)("select",{className:"form-control select form-select",defaultValue:"5",onChange:function(e){_((0,o.Z)((0,o.Z)({},M),{},{limit:e.target.value,pagenum:1}));var n=M;n.limit=e.target.value,n.pagenum=1,J(n)},children:[(0,C.jsx)("option",{value:"5",children:"5\xa0\xa0\xa0\xa0"}),(0,C.jsx)("option",{value:"10",children:"10\xa0\xa0\xa0\xa0"}),(0,C.jsx)("option",{value:"20",children:"20\xa0\xa0\xa0\xa0"}),(0,C.jsx)("option",{value:"50",children:"50\xa0\xa0\xa0\xa0"})]})}),(0,C.jsx)("label",{className:"float-end",children:(0,C.jsx)("input",{type:"text",placeholder:"Name, Mobile, Civil id number Search...",className:"mb-4 form-control-sm form-control",onChange:function(e){_((0,o.Z)((0,o.Z)({},M),{},{keyeword:e.target.value,pagenum:1}));var n=M;n.keyword=e.target.value,n.pagenum=1,J(n)},style:{width:"400px"}})}),(0,C.jsx)(j.ZP,{columns:t,data:function(e){var n=[];return e&&e.map((function(e,t){var a=e;a.no=t+M.limit*(M.pagenum-1)+1,n.push(a)})),n}(A.data),defaultSortField:"ID",striped:!0,defaultSortAsc:!1,pagination:!1,onSort:function(e,n){_((0,o.Z)((0,o.Z)({},M),{},{filter:t[e.id-1].title,sorter:n,pagenum:1}));var a=M;a.filter=t[e.id-1].title,a.sorter=n,a.pagenum=1,J(a)}}),(0,C.jsx)("label",{className:"float-end",style:{marginTop:"5px"},children:(0,C.jsx)(g.Z,{page:M.pagenum,count:Math.ceil(A.count/M.limit),showFirstButton:!0,showLastButton:!0,onChange:function(e,n){_((0,o.Z)((0,o.Z)({},M),{},{pagenum:n}));var t=M;t.pagenum=n,J(t)}})})]})})})})})})})]})}}}]);
//# sourceMappingURL=985.58c00e15.chunk.js.map