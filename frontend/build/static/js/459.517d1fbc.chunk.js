"use strict";(self.webpackChunkelection=self.webpackChunkelection||[]).push([[459],{1238:function(e,n,t){t.d(n,{HS:function(){return r},LL:function(){return a}});var a="http://3.233.196.8:8000/",r=("".concat("http://3.233.196.8:8000/","Backend/images/"),[{key:0,value:"created",color:"cyan"},{key:1,value:"broken",color:"red"},{key:2,value:"approved",color:"orange"},{key:3,value:"waiting...",color:"purple"},{key:4,value:"processing...",color:"blue"},{key:5,value:"done",color:"green"}])},564:function(e,n,t){t.r(n);var a=t(4942),r=t(1413),i=t(4165),s=t(5861),o=t(9439),c=t(2791),l=t(5316),d=t(3360),u=t(160),m=t(323),p=t(9743),h=t(2677),f=t(9140),x=t(1087),j=t(3513),v=t(7037),g=t(7798),Z=t(2576),N=t(1830),w=t.n(N),y=t(1238),b=t(184);n.default=function(){var e=[{name:"No",width:"60px",selector:function(e){return[e.no]},className:"table-column-center"},{name:"Name",title:"name",selector:function(e){return[e.name]},sortable:!0},{name:"Permission Name",title:"permissionId",selector:function(e){return[e.permission_name]},cell:function(e){return(0,b.jsx)("span",{style:{width:"100%"},children:(0,b.jsxs)("select",{className:"form-control select2 form-select",value:e.permissionid?e.permissionid:0,disabled:!0,children:[(0,b.jsx)("option",{value:0,children:"No permission"},""),Y.data.map((function(e){return(0,b.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})}},{name:"Parent Name",title:"parentId",selector:function(e){return[e.parent_name]},sortable:!0},{name:"Action",width:"100px",cell:function(e){return(0,b.jsxs)("span",{className:"",style:{width:"100%",textAlign:"end"},children:[(0,b.jsx)(g.Z,{placement:"top",overlay:(0,b.jsx)(Z.Z,{children:"Edit"}),children:(0,b.jsx)(x.rU,{to:"#",className:"btn btn-primary btn-sm rounded-11 me-2",onClick:function(){return K(e)},children:(0,b.jsx)("i",{children:(0,b.jsxs)("svg",{className:"table-edit",xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 24 24",width:"16",children:[(0,b.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,b.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM5.92 19H5v-.92l9.06-9.06.92.92L5.92 19zM20.71 5.63l-2.34-2.34c-.2-.2-.45-.29-.71-.29s-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41z"})]})})})}),(0,b.jsx)(g.Z,{placement:"top",overlay:(0,b.jsx)(Z.Z,{children:"Delete"}),children:(0,b.jsx)(x.rU,{to:"#",className:"btn btn-danger btn-sm rounded-11",onClick:function(){return q(e.id)},children:(0,b.jsx)("i",{children:(0,b.jsxs)("svg",{className:"table-delete",xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 24 24",width:"16",children:[(0,b.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,b.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4h-3.5z"})]})})})})]})}}],n=c.useState({flag:!1,mode:0}),t=(0,o.Z)(n,2),N=t[0],k=t[1],C=c.useState({limit:5,keyword:"",filter:"name",sorter:"desc",pagenum:1}),L=(0,o.Z)(C,2),B=L[0],S=L[1];c.useEffect((function(){fetch(y.LL+"getAllPermission",{method:"GET"}).then((function(e){return e.json()})).then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O({data:n.data});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),fetch(y.LL+"getAllRank",{method:"GET"}).then((function(e){return e.json()})).then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I({data:n.data});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),J(B)}),[]);var A=function(){return k({flag:!1,mode:0})},T=c.useState({data:[],count:0}),R=(0,o.Z)(T,2),z=R[0],H=R[1],E=c.useState({id:0,name:"",permissionid:0,parentid:0}),M=(0,o.Z)(E,2),V=M[0],G=M[1],P=c.useState({data:[]}),U=(0,o.Z)(P,2),Y=U[0],O=U[1],_=c.useState({data:[]}),D=(0,o.Z)(_,2),F=D[0],I=D[1],J=function(e){fetch(y.LL+"getAllRank/?limit="+e.limit+"&keyword="+e.keyword+"&filter="+e.filter+"&sorter="+e.sorter+"&pagenum="+e.pagenum,{method:"GET"}).then((function(e){return e.json()})).then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,n.data.map(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(a){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a,e.next=3,Y.data.map((function(e){e.id-a.permissionid===0&&(r.permission_name=e.name)}));case 3:return e.next=5,n.data.map((function(e){e.id-a.parentid===0&&(r.parent_name=e.name)}));case 5:t.push(r);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 3:H({data:t,count:n.count}),fetch(y.LL+"getAllRank",{method:"GET"}).then((function(e){return e.json()})).then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I({data:n.data});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},q=function(e){w().fire({title:"Are you sure?",text:"You delete this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(n){if(n.isConfirmed){var t=B;fetch(y.LL+"delRank/?id="+e+"&limit="+t.limit+"&keyword="+t.keyword+"&filter="+t.filter+"&sorter="+t.sorter+"&pagenum="+t.pagenum,{method:"GET"}).then((function(e){return e.json()})).then((function(e){w().fire("Deleted!","Your data has been deleted.","success"),H({data:e.data,count:e.count}),fetch(y.LL+"getAllRank",{method:"GET"}).then((function(e){return e.json()})).then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(B),A();case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}))}}))},K=function(e){k({flag:!0,mode:2}),G({id:e.id,name:e.name,permissionid:e.permissionid,parentid:e.parentid})},Q=function(e){G((0,r.Z)((0,r.Z)({},V),{},(0,a.Z)({},e.target.name,e.target.value)))};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"breadcrumb-header justify-content-between",children:[(0,b.jsx)("div",{className:"left-content",children:(0,b.jsx)("span",{className:"main-content-title mg-b-0 mg-b-lg-1",children:"Rank List"})}),(0,b.jsxs)("div",{className:"justify-content-center mt-2",children:[(0,b.jsxs)(x.rU,{className:"btn me-2 btn-rounded btn-outline-primary",to:"#",onClick:function(){k({flag:!0,mode:1}),G({id:0,name:"",permissionid:0,parentid:0})},children:[(0,b.jsx)("i",{className:"fe fe-plus me-2"}),"Add New Rank"]}),(0,b.jsxs)(l.Z,{show:N.flag,onHide:A,children:[(0,b.jsxs)(l.Z.Header,{className:"modal-header",children:[N.mode-1===0?(0,b.jsx)("h6",{className:"modal-title",children:"Add New Rank"}):(0,b.jsx)("h6",{className:"modal-title",children:"Update Rank"}),(0,b.jsx)(d.Z,{variant:"",className:"btn-close",type:"button",onClick:A,children:(0,b.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,b.jsxs)(l.Z.Body,{className:"modal-body",children:[" ",(0,b.jsx)("div",{className:"p-4",children:(0,b.jsxs)(u.Z,{className:"form-horizontal",children:[(0,b.jsx)(m.Z,{className:"form-group",children:(0,b.jsx)(u.Z.Control,{type:"text",className:"form-control",id:"name",placeholder:"name",name:"name",value:V.name,onChange:function(e){return Q(e)}})}),(0,b.jsx)(m.Z,{className:"form-group",children:(0,b.jsxs)("select",{id:"permissionid",placeholder:"permission id",name:"permissionid",className:"form-control select2 form-select",value:V.permissionid?V.permissionid:0,onChange:function(e){return Q(e)},children:[(0,b.jsx)("option",{value:0,children:"No permission"},""),Y.data.map((function(e){return(0,b.jsx)("option",{value:e.id,children:e.name},e.id)}))]})}),(0,b.jsx)(m.Z,{className:"form-group",children:(0,b.jsxs)("select",{id:"parentid",placeholder:"permission id",name:"parentid",className:"form-control select2 form-select",value:V.parentid?V.parentid:0,onChange:function(e){return Q(e)},children:[(0,b.jsx)("option",{value:0,children:"No parent"},""),F.data.map((function(e){if(N.mode-2!==0||e.id-V.id!==0)return(0,b.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})]})})]}),(0,b.jsxs)(l.Z.Footer,{children:[N.mode-1===0?(0,b.jsx)(d.Z,{variant:"",className:"btn ripple btn-primary",type:"button",onClick:function(){console.log("dataValue",V);var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)};fetch(y.LL+"addRank",e).then((function(e){return e.json()})).then((function(e){console.log("data",e),e.code-200===0&&(J(B),A())}))},children:"Add"}):(0,b.jsx)(d.Z,{variant:"",className:"btn ripple btn-primary",type:"button",onClick:function(){A(),w().fire({title:"Are you sure?",text:"You update this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update it!"}).then((function(e){if(e.isConfirmed){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)};fetch(y.LL+"updateRank",n).then((function(e){return e.json()})).then((function(e){e.code-200===0&&(J(B),w().fire("Update!","Your data has been updated.","success"))}))}}))},children:"Update"}),(0,b.jsx)(d.Z,{variant:"",className:"btn ripple btn-secondary",onClick:A,children:"Close"})]})]})]})]}),(0,b.jsx)(p.Z,{className:"row-sm",children:(0,b.jsx)(h.Z,{lg:12,children:(0,b.jsx)(f.Z,{className:"custom-card",children:(0,b.jsx)(f.Z.Body,{children:(0,b.jsx)("div",{className:"table-responsive ",children:(0,b.jsx)("span",{className:"datatable",children:(0,b.jsxs)("span",{className:"uselistdata",children:[(0,b.jsx)("label",{className:"float-first",children:(0,b.jsxs)("select",{className:"form-control select form-select",defaultValue:"5",onChange:function(e){S((0,r.Z)((0,r.Z)({},B),{},{limit:e.target.value,pagenum:1}));var n=B;n.limit=e.target.value,n.pagenum=1,J(n)},children:[(0,b.jsx)("option",{value:"5",children:"5\xa0\xa0\xa0\xa0"}),(0,b.jsx)("option",{value:"10",children:"10\xa0\xa0\xa0\xa0"}),(0,b.jsx)("option",{value:"20",children:"20\xa0\xa0\xa0\xa0"}),(0,b.jsx)("option",{value:"50",children:"50\xa0\xa0\xa0\xa0"})]})}),(0,b.jsx)("label",{className:"float-end",children:(0,b.jsx)("input",{type:"text",placeholder:"Name Search...",className:"mb-4 form-control-sm form-control",onChange:function(e){S((0,r.Z)((0,r.Z)({},B),{},{keyeword:e.target.value,pagenum:1}));var n=B;n.keyword=e.target.value,n.pagenum=1,J(n)}})}),(0,b.jsx)(j.ZP,{columns:e,data:function(e){var n=[];return e&&e.map((function(e,t){var a=e;a.no=t+B.limit*(B.pagenum-1)+1,n.push(a)})),n}(z.data),defaultSortField:"ID",striped:!0,defaultSortAsc:!1,pagination:!1,onSort:function(n,t){S((0,r.Z)((0,r.Z)({},B),{},{filter:e[n.id-1].title,sorter:t,pagenum:1}));var a=B;a.filter=e[n.id-1].title,a.sorter=t,a.pagenum=1,J(a)}}),(0,b.jsx)("label",{className:"float-end",style:{marginTop:"5px"},children:(0,b.jsx)(v.Z,{page:B.pagenum,count:Math.ceil(z.count/B.limit),showFirstButton:!0,showLastButton:!0,onChange:function(e,n){S((0,r.Z)((0,r.Z)({},B),{},{pagenum:n}));var t=B;t.pagenum=n,J(t)}})})]})})})})})})})]})}}}]);
//# sourceMappingURL=459.517d1fbc.chunk.js.map